<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="user">
    <!-- 用户名,手机,邮箱 -->
    <select id="getUserByMap" resultType="user" parameterType="map">
        <![CDATA[
		select id,
		login_name,
		pwd,
		init_pwd,
		nick_name,
		state,
		mobile_phone,
		email,
		add_time from sys_user 
	    ]]>
        <where>
            <if test="@Ognl@isNotEmpty(loginName)">
                and login_name = #{loginName}
            </if>
        </where>

    </select>
    <select id="getUserFriendList" resultType="user" parameterType="map">
		<![CDATA[
        select *
        from sys_user t
        where exists
                  (select 1
                   from zf_user_workspace r
                   where r.user_id = t.id and r.user_id <> #{userId} and r.workspace_id = ${workspaceId})
        ]]>
	</select>


</mapper>


